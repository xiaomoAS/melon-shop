{"version":3,"file":"index.js","sources":["pages/index/index.vue","pages/index/index.vue?type=page"],"sourcesContent":["<template>\r\n\t<scroll-view scroll-y=\"true\" @scrolltolower=\"loadMoreData\" style=\"height: 100vh\">\r\n\t\t<view>\r\n\t\t\t<view class=\"head_logo\">LOGO</view>\r\n\t\t\t<image src=\"https://melonbamboo.oss-cn-beijing.aliyuncs.com/melonbamboo/916cae2f99af4241acf65617a6a07bd9/index_head_bg.png?Expires=2073875593&OSSAccessKeyId=LTAI5tHrbcXwiX27kw8s1cSb&Signature=6l%2B1kM%2BmbcTT4vmhVbD6zlktjVo%3D\" class=\"index_head_bg\" mode=\"widthFix\"></image>\r\n\t\t\t<view class=\"contain\">\r\n\t\t\t\t<view class=\"index_header_cont\">\r\n\t\t\t\t\t<view class=\"index_search\">\r\n\t\t\t\t\t\t<image class=\"i\" src=\"https://melonbamboo.oss-cn-beijing.aliyuncs.com/melonbamboo/4504ca659b80453ca747baaabba8d106/ico_1.png?Expires=2073875740&OSSAccessKeyId=LTAI5tHrbcXwiX27kw8s1cSb&Signature=yYeoocs0saGNdYETNQ9FgrHVaB0%3D\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"搜索您喜欢的...\">\r\n\t\t\t\t\t\t<navigator url=\"/pages/ifica/ifica\" open-type=\"switchTab\" class=\"btn\">搜索</navigator>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<swiper class=\"index_baner\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t\t<swiper-item v-for=\"(item,index) in carouselImages\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"swiper-item\"><image :src=\"item.url\" name=\"{{item.name}}\" id=\"{{item.id}}\" mode=\"aspectFill\"></image> </view>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t\t<view class=\"index_navi_cont\">\r\n\t\t\t\t\t\t<view v-for=\"item in cateList\" :key=\"item.id\" class=\"list\">\r\n\t\t\t\t\t\t\t<view class=\"tis_i\"><image :src=\"item.logoUrl\" mode=\"widthFix\"></image> </view>\r\n\t\t\t\t\t\t\t<view class=\"txt\">{{ item.name }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"index_new_vip\">\r\n\t\t\t\t\t\t<image class=\"tips\" src=\"https://melonbamboo.oss-cn-beijing.aliyuncs.com/melonbamboo/29b37b79ca524070b69881a8a0be4d84/tip_1.png?Expires=2073875832&OSSAccessKeyId=LTAI5tHrbcXwiX27kw8s1cSb&Signature=yea3i%2FfwVPnD91oEwgNeiUyJ4x8%3D\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t<view class=\"head_title\">\r\n\t\t\t\t\t\t\t<view class=\"tle\">新人<text>专享</text> </view>\r\n\t\t\t\t\t\t\t<view class=\"txt\">开启品质生活</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view v-if=\"newPersonList.length\" class=\"pro_last\">\r\n\t\t\t\t\t\t\t<view v-for=\"(newItem, index) in newPersonList\" :key=\"index\" class=\"list_cont\">\r\n\t\t\t\t\t\t\t\t<view class=\"tis_i\">\r\n\t\t\t\t\t\t\t\t\t<image class=\"i\" :src=\"newItem.imgUrl\" mode=\"widthFix\"></image> \r\n\t\t\t\t\t\t\t\t\t<view class=\"tip_txt\">新客专享</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"pro_name\">{{ newItem.title }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"pro_price\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"dt\">新人价</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"dd\">￥{{ newItem.realpayPrice }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"index_pro_contain\">\r\n\t\t\t\t<image class=\"pro_head_bg\" src=\"https://melonbamboo.oss-cn-beijing.aliyuncs.com/melonbamboo/608def905ee846eab80b698d5d29c6e5/index_case2_bg.png?Expires=2073875992&OSSAccessKeyId=LTAI5tHrbcXwiX27kw8s1cSb&Signature=Zd2Oz8m0uYQy8idN34qA4pxtSJc%3D\" mode=\"widthFix\"></image>\r\n\t\t\t\t<view class=\"title_head\">\r\n\t\t\t\t\t<image class=\"logo\" src=\"https://melonbamboo.oss-cn-beijing.aliyuncs.com/melonbamboo/b5a62a0a9f344046b6ecccd5d5f9184a/pro_logo.png?Expires=2073875894&OSSAccessKeyId=LTAI5tHrbcXwiX27kw8s1cSb&Signature=UhwsRTz1JJlnDOlP0K4Tm0ABWGk%3D\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t<view class=\"dt\">团购好货</view>\r\n\t\t\t\t\t<view class=\"txt\">三餐四季 尽在知花</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pro_list_cont\" v-for=\"item in productList\" :key=\"item.productId\" :class=\"{ 'null': !item.stock }\">\r\n\t\t\t\t\t<ProductItem :info=\"item\" />\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<ShopCart ref=\"shopCartRef\" />\r\n\t\t</view>\r\n\t</scroll-view>\r\n</template>\r\n<script>\r\n\timport ProductItem from '@/components/product-item/ProductItem.vue'\r\n\timport ShopCart from '@/components/shop-cart/ShopCart.vue'\r\n\tconst app = getApp()\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbaseUrl: this.$baseURL,\r\n\t\t\t\tcarouselImages: [],\r\n\t\t\t\tcateList: [], // 所有类目\r\n\t\t\t\tnewPersonList: [],\r\n\t\t\t\tisShow:0,\r\n\t\t\t\tproductList: [],\r\n\t\t\t\tnoMoreData: false,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tProductItem,\r\n\t\t\tShopCart\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.getCarouselImages();\r\n\t\t\tthis.getCates();\r\n\t\t\tthis.getNewPerson()\r\n\t\t\tthis.getProductList()\r\n\t\t\t// 强制刷新购物车数据\r\n\t\t\tthis.refreshShopCart()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tloadMoreData() {\r\n\t\t\t\tif (this.noMoreData) return\r\n\t\t\t\tthis.page = this.page + 1\r\n\t\t\t\tthis.getProductList()\r\n\t\t\t},\r\n\t\t\tasync getProductList() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { rows } = await this.$http.post('/items/recommend', {\r\n\t\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 加载完了\r\n\t\t\t\t\tif (!rows.length) {\r\n\t\t\t\t\t\tthis.noMoreData = true\r\n\t\t\t\t\t} \r\n\t\t\t\t\tthis.productList = this.productList.concat(rows)\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.productList = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getCarouselImages() {\r\n\t\t\t\ttry {\r\n\t\t\t\tconsole.log(11111)\r\n\t\t\t\t\tthis.carouselImages = await this.$http.post('/index/carousel', {})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.carouselImages = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getCates() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.cateList = await this.$http.post('/index/cats', {})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.cateList = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync getNewPerson() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst { rows } = await this.$http.post('/items/newperson', {\r\n\t\t\t\t\t\tpage: 1,\r\n\t\t\t\t\t\tpageSize: 10\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.newPersonList = rows.slice(0, 3)\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tthis.newPersonList = []\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 强制刷新购物车数据\r\n\t\t\trefreshShopCart() {\r\n\t\t\t\t// 使用全局事件触发购物车刷新\r\n\t\t\t\tuni.$emit('refreshShopCart')\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(/pages/index/index.css);\r\n\t@import url(/pages/index/prolast.css);\r\n\t@import url(/pages/index/cartnum.css);\r\n</style>\r\n","import MiniProgramPage from '/Users/jiangzupei1/Desktop/melon-shop/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AA6DC,MAAO,cAAa,MAAW;AAC/B,MAAK,WAAY,MAAW;AAChB,OAAO;AACnB,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,SAAS,KAAK;AAAA,MACd,gBAAgB,CAAE;AAAA,MAClB,UAAU,CAAE;AAAA;AAAA,MACZ,eAAe,CAAE;AAAA,MACjB,QAAO;AAAA,MACP,aAAa,CAAE;AAAA,MACf,YAAY;AAAA,MACZ,MAAM;AAAA,MACN,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,YAAY;AAAA,IACX;AAAA,IACA;AAAA,EACA;AAAA,EACD,SAAS;AACR,SAAK,kBAAiB;AACtB,SAAK,SAAQ;AACb,SAAK,aAAa;AAClB,SAAK,eAAe;AAEpB,SAAK,gBAAgB;AAAA,EACrB;AAAA,EACD,SAAS;AAAA,IACR,eAAe;AACd,UAAI,KAAK;AAAY;AACrB,WAAK,OAAO,KAAK,OAAO;AACxB,WAAK,eAAe;AAAA,IACpB;AAAA,IACD,MAAM,iBAAiB;AACtB,UAAI;AACH,cAAM,EAAE,KAAG,IAAM,MAAM,KAAK,MAAM,KAAK,oBAAoB;AAAA,UAC1D,MAAM,KAAK;AAAA,UACX,UAAU,KAAK;AAAA,SACf;AAED,YAAI,CAAC,KAAK,QAAQ;AACjB,eAAK,aAAa;AAAA,QACnB;AACA,aAAK,cAAc,KAAK,YAAY,OAAO,IAAI;AAAA,MAC9C,SAAO,OAAO;AACf,aAAK,cAAc,CAAC;AAAA,MACrB;AAAA,IACA;AAAA,IACD,MAAM,oBAAoB;AACzB,UAAI;AACJA,sBAAAA,MAAY,MAAA,OAAA,gCAAA,KAAK;AAChB,aAAK,iBAAiB,MAAM,KAAK,MAAM,KAAK,mBAAmB,EAAE;AAAA,MAChE,SAAO,OAAO;AACf,aAAK,iBAAiB,CAAC;AAAA,MACxB;AAAA,IACA;AAAA,IACD,MAAM,WAAW;AAChB,UAAI;AACH,aAAK,WAAW,MAAM,KAAK,MAAM,KAAK,eAAe,EAAE;AAAA,MACtD,SAAO,OAAO;AACf,aAAK,WAAW,CAAC;AAAA,MAClB;AAAA,IACA;AAAA,IACD,MAAM,eAAe;AACpB,UAAI;AACH,cAAM,EAAE,KAAG,IAAM,MAAM,KAAK,MAAM,KAAK,oBAAoB;AAAA,UAC1D,MAAM;AAAA,UACN,UAAU;AAAA,SACV;AACD,aAAK,gBAAgB,KAAK,MAAM,GAAG,CAAC;AAAA,MACnC,SAAO,OAAO;AACf,aAAK,gBAAgB,CAAC;AAAA,MACvB;AAAA,IACA;AAAA;AAAA,IAED,kBAAkB;AAEjBA,oBAAG,MAAC,MAAM,iBAAiB;AAAA,IAC5B;AAAA,EACA;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/ID,GAAG,WAAW,eAAe;"}